<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - Smart Syllabus Tracker</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    :root {
      --primary-color: #4f46e5;
      --secondary-color: #f8fafc;
      --text-dark: #1e293b;
      --text-light: #64748b;
      --border-color: #e2e8f0;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-color);
    }

    .navbar-brand {
      font-weight: 700;
      color: var(--primary-color) !important;
    }

    .nav-link {
      color: var(--text-dark) !important;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-link:hover, .nav-link.active {
      color: var(--primary-color) !important;
    }

    .login-section {
      min-height: calc(100vh - 200px);
      display: flex;
      align-items: center;
    }

    .auth-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .auth-tab {
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.3s ease;
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
    }

    .auth-tab.active {
      background: var(--primary-color);
      color: white;
    }

    .form-control {
      border-radius: 10px;
      border: 2px solid var(--border-color);
      padding: 12px 16px;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .form-control:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(79, 70, 229, 0.25);
    }

    .btn-primary {
      background: var(--primary-color);
      border: none;
      border-radius: 10px;
      padding: 12px 24px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      background: #3730a3;
      transform: translateY(-2px);
    }

    .btn-outline-danger {
      border-radius: 10px;
      padding: 12px 24px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .role-selector {
      background: var(--secondary-color);
      border-radius: 10px;
      padding: 15px;
    }

    .role-selector label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-weight: 500;
      margin: 0;
    }

    .auth-separator {
      position: relative;
      color: var(--text-light);
    }

    .auth-separator::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: var(--border-color);
      z-index: 1;
    }

    .auth-separator span {
      background: white;
      padding: 0 15px;
      position: relative;
      z-index: 2;
    }

    footer {
      background: rgba(255, 255, 255, 0.95) !important;
      backdrop-filter: blur(10px);
      border-top: 1px solid var(--border-color);
    }

    .fade-in {
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .error-message {
      color: #dc3545;
      font-size: 0.875rem;
      margin-top: 5px;
      display: none;
    }

    .success-message {
      color: #28a745;
      font-size: 0.875rem;
      margin-top: 5px;
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <div class="container d-flex justify-content-between align-items-center py-3">
      <h1 class="navbar-brand h3 mb-0">Smart Syllabus Tracker</h1>
      <nav>
        <ul class="nav">
          <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="login.html" class="nav-link active">Login</a></li>
          <li class="nav-item"><a href="index.html#about" class="nav-link">About</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="login-section py-5">
    <div class="container">
      <div class="auth-container card p-4 mx-auto" style="max-width: 600px;">
        <div class="auth-tabs d-flex justify-content-around mb-4">
          <button class="auth-tab btn btn-outline-primary active" data-tab="login">Login</button>
          <button class="auth-tab btn btn-outline-primary" data-tab="register">Register</button>
        </div>

        <div class="auth-content">
          <!-- Login Form -->
          <div class="auth-form active fade-in" id="login-form">
            <h3 class="text-center mb-4">Login to Your Account</h3>
            <form id="login-form-element" novalidate>
              <div class="role-selector d-flex justify-content-around mb-4">
                <label><input type="radio" name="role" value="student" checked> Student</label>
                <label><input type="radio" name="role" value="faculty"> Faculty</label>
              </div>
              <div class="form-group mb-3">
                <label for="login-email" class="form-label">Email Address</label>
                <input type="email" id="login-email" class="form-control" required 
                       placeholder="Enter your email">
                <div class="error-message" id="login-email-error"></div>
              </div>
              <div class="form-group mb-3">
                <label for="login-password" class="form-label">Password</label>
                <input type="password" id="login-password" class="form-control" required 
                       placeholder="Enter your password">
                <div class="error-message" id="login-password-error"></div>
              </div>
              <div class="form-group d-flex justify-content-between align-items-center mb-4">
                <div class="form-check">
                  <input type="checkbox" id="remember-me" class="form-check-input">
                  <label for="remember-me" class="form-check-label">Remember me</label>
                </div>
                <a href="#" id="forgot-password-link" class="text-decoration-none">Forgot Password?</a>
              </div>
              <div class="success-message mb-3" id="login-success"></div>
              <div class="error-message mb-3" id="login-error"></div>
              <button type="submit" id="login-btn" class="btn btn-primary w-100 mb-3">
                <span id="login-btn-text">Login</span>
                <div class="spinner-border spinner-border-sm ms-2 d-none" id="login-spinner"></div>
              </button>
            </form>
            <div class="auth-separator text-center my-3"><span>OR</span></div>
            <button type="button" id="google-login" class="btn btn-outline-danger w-100">
              <i class="fab fa-google me-2"></i> Login with Google
            </button>
          </div>

          <!-- Register Form -->
          <div class="auth-form" id="register-form" style="display: none;">
            <h3 class="text-center mb-4">Create an Account</h3>
            <form id="register-form-element" novalidate>
              <div class="role-selector d-flex justify-content-around mb-4">
                <label><input type="radio" name="reg-role" value="student" checked> Student</label>
                <label><input type="radio" name="reg-role" value="faculty"> Faculty</label>
              </div>

              <div class="form-group mb-3">
                <label for="register-name" class="form-label">Full Name</label>
                <input type="text" id="register-name" class="form-control" required 
                       placeholder="Enter your full name">
                <div class="error-message" id="register-name-error"></div>
              </div>
              <div class="form-group mb-3">
                <label for="register-email" class="form-label">Email Address</label>
                <input type="email" id="register-email" class="form-control" required 
                       placeholder="Enter your email">
                <div class="error-message" id="register-email-error"></div>
              </div>
              <div class="form-group mb-3">
                <label for="register-password" class="form-label">Password</label>
                <input type="password" id="register-password" class="form-control" required 
                       placeholder="Enter your password" minlength="6">
                <div class="error-message" id="register-password-error"></div>
              </div>
              <div class="form-group mb-3">
                <label for="register-confirm-password" class="form-label">Confirm Password</label>
                <input type="password" id="register-confirm-password" class="form-control" required 
                       placeholder="Confirm your password">
                <div class="error-message" id="register-confirm-password-error"></div>
              </div>

              <!-- Faculty Fields -->
              <div id="faculty-fields" style="display: none;">
                <div class="form-group mb-3">
                  <label for="faculty-id" class="form-label">Faculty ID</label>
                  <input type="text" id="faculty-id" class="form-control" 
                         placeholder="Enter faculty ID">
                  <div class="error-message" id="faculty-id-error"></div>
                </div>
                <div class="form-group mb-3">
                  <label for="department" class="form-label">Department</label>
                  <select id="department" class="form-control">
                    <option value="">Select Department</option>
                    <option value="computer-science">Computer Science</option>
                    <option value="electrical-engineering">Electrical Engineering</option>
                    <option value="mechanical-engineering">Mechanical Engineering</option>
                    <option value="civil-engineering">Civil Engineering</option>
                    <option value="business-administration">Business Administration</option>
                    <option value="humanities">Humanities</option>
                  </select>
                  <div class="error-message" id="department-error"></div>
                </div>
              </div>

              <!-- Student Fields -->
              <div id="student-fields">
                <div class="form-group mb-3">
                  <label for="student-id" class="form-label">Student ID</label>
                  <input type="text" id="student-id" class="form-control" 
                         placeholder="Enter student ID">
                  <div class="error-message" id="student-id-error"></div>
                </div>
                <div class="form-group mb-3">
                  <label for="program" class="form-label">Program</label>
                  <select id="program" class="form-control">
                    <option value="">Select Program</option>
                    <option value="bscs">BS Computer Science</option>
                    <option value="bsee">BS Electrical Engineering</option>
                    <option value="bsme">BS Mechanical Engineering</option>
                    <option value="bsce">BS Civil Engineering</option>
                    <option value="bba">BBA</option>
                    <option value="ba">BA</option>
                  </select>
                  <div class="error-message" id="program-error"></div>
                </div>
                <div class="form-group mb-3">
                  <label for="semester" class="form-label">Semester</label>
                  <select id="semester" class="form-control">
                    <option value="">Select Semester</option>
                    <option value="1">1st Semester</option>
                    <option value="2">2nd Semester</option>
                    <option value="3">3rd Semester</option>
                    <option value="4">4th Semester</option>
                    <option value="5">5th Semester</option>
                    <option value="6">6th Semester</option>
                    <option value="7">7th Semester</option>
                    <option value="8">8th Semester</option>
                  </select>
                  <div class="error-message" id="semester-error"></div>
                </div>
              </div>

              <div class="success-message mb-3" id="register-success"></div>
              <div class="error-message mb-3" id="register-error"></div>
              <button type="submit" id="register-btn" class="btn btn-primary w-100">
                <span id="register-btn-text">Register</span>
                <div class="spinner-border spinner-border-sm ms-2 d-none" id="register-spinner"></div>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="mt-5 bg-light py-4">
    <div class="container text-center">
      <h5>Smart Syllabus Tracker</h5>
      <p class="mb-1">Track, manage, and optimize your academic progress</p>
      <small>&copy; 2024 Smart Syllabus Tracker. All rights reserved.</small>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Tab switching functionality
    document.querySelectorAll('.auth-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const targetTab = tab.getAttribute('data-tab');
        
        // Update active tab
        document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Show corresponding form
        document.querySelectorAll('.auth-form').forEach(form => {
          form.style.display = 'none';
        });
        
        const targetForm = document.getElementById(`${targetTab}-form`);
        targetForm.style.display = 'block';
        targetForm.classList.add('fade-in');
      });
    });

    // Role selector functionality for registration
    document.querySelectorAll('input[name="reg-role"]').forEach(radio => {
      radio.addEventListener('change', () => {
        const role = document.querySelector('input[name="reg-role"]:checked').value;
        const facultyFields = document.getElementById('faculty-fields');
        const studentFields = document.getElementById('student-fields');
        
        if (role === 'faculty') {
          facultyFields.style.display = 'block';
          studentFields.style.display = 'none';
        } else {
          facultyFields.style.display = 'none';
          studentFields.style.display = 'block';
        }
      });
    });

    // Form validation
    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function showError(fieldId, message) {
      const errorElement = document.getElementById(`${fieldId}-error`);
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }

    function hideError(fieldId) {
      const errorElement = document.getElementById(`${fieldId}-error`);
      errorElement.style.display = 'none';
    }

    function showMessage(elementId, message, isError = false) {
      const element = document.getElementById(elementId);
      element.textContent = message;
      element.style.display = 'block';
      
      if (isError) {
        element.className = 'error-message mb-3';
      } else {
        element.className = 'success-message mb-3';
      }
    }

    function hideMessage(elementId) {
      document.getElementById(elementId).style.display = 'none';
    }

    // Login form validation
    document.getElementById('login-form-element').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value;
      let isValid = true;

      // Clear previous errors
      hideError('login-email');
      hideError('login-password');
      hideMessage('login-error');

      if (!email) {
        showError('login-email', 'Email is required');
        isValid = false;
      } else if (!validateEmail(email)) {
        showError('login-email', 'Please enter a valid email');
        isValid = false;
      }

      if (!password) {
        showError('login-password', 'Password is required');
        isValid = false;
      }

      if (isValid) {
        // Show loading state
        const btn = document.getElementById('login-btn');
        const btnText = document.getElementById('login-btn-text');
        const spinner = document.getElementById('login-spinner');
        
        btn.disabled = true;
        btnText.textContent = 'Signing in...';
        spinner.classList.remove('d-none');

        // Simulate login (replace with actual authentication)
        setTimeout(() => {
          showMessage('login-success', 'Login successful! Redirecting...');
          
          setTimeout(() => {
            window.location.href = 'dashboard.html';
          }, 1500);
        }, 2000);
      }
    });

    // Register form validation
    document.getElementById('register-form-element').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const name = document.getElementById('register-name').value.trim();
      const email = document.getElementById('register-email').value.trim();
      const password = document.getElementById('register-password').value;
      const confirmPassword = document.getElementById('register-confirm-password').value;
      const role = document.querySelector('input[name="reg-role"]:checked').value;
      
      let isValid = true;

      // Clear previous errors
      ['register-name', 'register-email', 'register-password', 'register-confirm-password'].forEach(field => {
        hideError(field);
      });
      hideMessage('register-error');

      if (!name) {
        showError('register-name', 'Full name is required');
        isValid = false;
      }

      if (!email) {
        showError('register-email', 'Email is required');
        isValid = false;
      } else if (!validateEmail(email)) {
        showError('register-email', 'Please enter a valid email');
        isValid = false;
      }

      if (!password) {
        showError('register-password', 'Password is required');
        isValid = false;
      } else if (password.length < 6) {
        showError('register-password', 'Password must be at least 6 characters');
        isValid = false;
      }

      if (!confirmPassword) {
        showError('register-confirm-password', 'Please confirm your password');
        isValid = false;
      } else if (password !== confirmPassword) {
        showError('register-confirm-password', 'Passwords do not match');
        isValid = false;
      }

      // Role-specific validation
      if (role === 'faculty') {
        const facultyId = document.getElementById('faculty-id').value.trim();
        const department = document.getElementById('department').value;
        
        if (!facultyId) {
          showError('faculty-id', 'Faculty ID is required');
          isValid = false;
        }
        if (!department) {
          showError('department', 'Department is required');
          isValid = false;
        }
      } else {
        const studentId = document.getElementById('student-id').value.trim();
        const program = document.getElementById('program').value;
        const semester = document.getElementById('semester').value;
        
        if (!studentId) {
          showError('student-id', 'Student ID is required');
          isValid = false;
        }
        if (!program) {
          showError('program', 'Program is required');
          isValid = false;
        }
        if (!semester) {
          showError('semester', 'Semester is required');
          isValid = false;
        }
      }

      if (isValid) {
        // Show loading state
        const btn = document.getElementById('register-btn');
        const btnText = document.getElementById('register-btn-text');
        const spinner = document.getElementById('register-spinner');
        
        btn.disabled = true;
        btnText.textContent = 'Creating Account...';
        spinner.classList.remove('d-none');

        // Simulate registration (replace with actual authentication)
        setTimeout(() => {
          showMessage('register-success', 'Account created successfully! Please check your email for verification.');
          
          // Reset form
          document.getElementById('register-form-element').reset();
          
          // Reset button
          btn.disabled = false;
          btnText.textContent = 'Register';
          spinner.classList.add('d-none');
          
          // Switch to login tab after 2 seconds
          setTimeout(() => {
            document.querySelector('[data-tab="login"]').click();
          }, 2000);
        }, 2000);
      }
    });

    // Google login placeholder
    document.getElementById('google-login').addEventListener('click', () => {
      alert('Google login functionality would be implemented here');
    });

    // Forgot password placeholder
    document.getElementById('forgot-password-link').addEventListener('click', (e) => {
      e.preventDefault();
      alert('Forgot password functionality would be implemented here');
    });
  </script>
  <!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<!-- Firebase Config -->
<script src="js/firebase-config.js"></script>

<!-- Your Custom Scripts -->
<script src="js/auth.js"></script>
<script src="js/app.js"></script>

</body>
</html>